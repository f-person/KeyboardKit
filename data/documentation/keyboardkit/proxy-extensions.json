{"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Keyboard input view controllers have a "},{"type":"codeVoice","code":"textDocumentProxy"},{"type":"text","text":", which is the way a keyboard integrates with the currently active app. It lets you insert and remove text, move the cursor forward and backward etc."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"However, the proxy is very basic and require you to implement a lot of functionality if you want to do more advanced things. KeyboardKit therefore provides you with a bunch of extensions that make the proxy more capable. Some have to work around the limitiations of what an iOS keyboard extension can do, but overall they make a lot of operations easier to perform."}]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/KeyboardKit\/KeyboardKitPro"},{"type":"text","text":" specific extensions are described at the end of this document."}]},{"anchor":"Extensions","level":2,"type":"heading","text":"Extensions"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Since extensions are not included in the generated documentation, this article describes the extensions you get to by simply importing KeyboardKit. In fact, you could use KeyboardKit just to get access to these extensions and ignore all other parts of the library."}]},{"anchor":"Autocomplete","level":3,"type":"heading","text":"Autocomplete"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"hasAutocompleteInsertedSpace"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"hasAutocompleteRemovedSpace"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"insertAutocompleteSuggestion(:tryInsertSpace)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"tryInsertSpaceAfterAutocomplete()"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"tryReinsertAutocompleteRemovedSpace()"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"tryRemoveAutocompleteInsertedSpace"}]}]}]},{"anchor":"Content","level":3,"type":"heading","text":"Content"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"documentContext"}]}]}]},{"anchor":"Delete","level":3,"type":"heading","text":"Delete"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"deleteBackward(times:)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"deleteBackward(range:)"}]}]}]},{"anchor":"Quotation","level":3,"type":"heading","text":"Quotation"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"hasUnclosedQuotationBeforeInput(for:)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"hasUnclosedAlternateQuotationBeforeInput(for:)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"preferredQuotationReplacement(whenInserting:for:)"}]}]}]},{"anchor":"Sentences","level":3,"type":"heading","text":"Sentences"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"isCursorAtNewSentence"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"isCursorAtNewSentenceWithTrailingWhitespace"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"sentenceBeforeInput"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"sentenceDelimiters"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"endSentence()"}]}]}]},{"anchor":"Words","level":3,"type":"heading","text":"Words"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"currentWord"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"currentWordPreCursorPart"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"currentWordPostCursorPart"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"hasCurrentWord"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"isCursorAtNewWord"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"isCursorAtTheEndOfTheCurrentWord"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"wordBeforeInput"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"wordDelimiters"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"replaceCurrentWord(with replacement: String)"}]}]}]},{"anchor":"ðŸ‘‘-Pro-features","level":2,"type":"heading","text":"ðŸ‘‘ Pro features"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"KeyboardKit Pro"}],"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/KeyboardKit\/KeyboardKitPro","overridingTitle":"KeyboardKit Pro"},{"type":"text","text":" unlocks additional text document proxy capabilities."}]},{"anchor":"Getting-the-full-document-context","level":3,"type":"heading","text":"Getting the full document context"},{"type":"paragraph","inlineContent":[{"type":"text","text":"As you may have noticed, "},{"type":"codeVoice","code":"documentContextBeforeInput"},{"type":"text","text":" and "},{"type":"codeVoice","code":"documentContextAfterInput"},{"type":"text","text":" donâ€™t return "},{"type":"emphasis","inlineContent":[{"type":"text","text":"all"}]},{"type":"text","text":" text before and after the input cursor. Any line breaks may at any time stop the proxy from reading more content, which makes it hard to do more complex operations from a keyboard extension, such as proof-reading a document, provide AI-based functionality etc."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"KeyboardKit Pro therefore unlocks some "},{"type":"codeVoice","code":"UITextDocumentProxy"},{"type":"text","text":" extensions that let you read all text from the proxy:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"func fullDocumentContext() async throws -> FullDocumentContextResult"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"func fullDocumentContextBeforeInput() async throws -> String"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"func fullDocumentContextAfterInput() async throws -> String"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"They all read the text by moving the input cursor around to get access to more text."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Since these functions are "},{"type":"codeVoice","code":"async"},{"type":"text","text":", you need to wrap them in a task when calling them from SwiftUI, for instance:"}]},{"type":"codeListing","syntax":"swift","code":["struct KeyboardView: View {","","    @EnvironmentObject","    private var context: KeyboardContext","","    var body: some View {","        VStack {","            Button(\"Get the full document context\") {","                Task {","                    let proxy = context.textDocumentProxy","                    let result = try? await proxy.fullDocumentContext()","                    await MainActor.run {","                        print(result?.fullDocumentContext)","                        print(result?.fullDocumentContextBeforeInput)","                        print(result?.fullDocumentContextAfterInput)","                    }","                }","            }","        }","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note that calling these functions will cause the keyboard extension to navigate through the entire text mass by moving the input cursor around in the text document, after which it will return the cursor to its original position."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/keyboardkit\/proxy-extensions"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Proxy-Extensions","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"This article describes how KeyboardKit extends "},{"type":"codeVoice","code":"UITextDocumentProxy"},{"type":"text","text":" with a lot of additional functionality."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Proxy Extensions","role":"article","modules":[{"name":"KeyboardKit"}]},"hierarchy":{"paths":[["doc:\/\/KeyboardKit\/documentation\/KeyboardKit"]]},"seeAlsoSections":[{"title":"Articles","identifiers":["doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Actions","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Appearance","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Autocomplete","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Callouts","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Dictation","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Emojis","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/External-Keyboards","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Feedback","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Gestures","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Input","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Keyboard","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Layout","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Localization","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Previews","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Routing","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/RTL","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Settings"],"generated":true}],"references":{"doc://KeyboardKit/documentation/KeyboardKit/Gestures":{"role":"article","title":"Gestures","abstract":[{"type":"text","text":"This article describes the KeyboardKit gesture engine and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Gestures","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/gestures"},"doc://KeyboardKit/documentation/KeyboardKit/KeyboardLocale/persian":{"role":"symbol","title":"KeyboardLocale.persian","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"persian"}],"abstract":[],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardLocale\/persian","kind":"symbol","type":"topic","url":"\/documentation\/keyboardkit\/keyboardlocale\/persian"},"doc://KeyboardKit/documentation/KeyboardKit/Autocomplete":{"role":"article","title":"Autocomplete","abstract":[{"type":"text","text":"This article describes the KeyboardKit autocomplete engine and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Autocomplete","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/autocomplete"},"doc://KeyboardKit/documentation/KeyboardKit/Callouts":{"role":"article","title":"Callouts","abstract":[{"type":"text","text":"This article describes the KeyboardKit callout engine and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Callouts","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/callouts"},"doc://KeyboardKit/documentation/KeyboardKit/Appearance":{"role":"article","title":"Appearance","abstract":[{"type":"text","text":"This article describes the KeyboardKit appearance engine and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Appearance","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/appearance"},"doc://KeyboardKit/documentation/KeyboardKit/Previews":{"role":"article","title":"Previews","abstract":[{"type":"text","text":"This article describes how KeyboardKit makes it easy to preview keyboard-specific views."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Previews","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/previews"},"doc://KeyboardKit/documentation/KeyboardKit/Emojis":{"role":"article","title":"Emojis","abstract":[{"type":"text","text":"This article describes the KeyboardKit emoji model and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Emojis","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/emojis"},"doc://KeyboardKit/documentation/KeyboardKit/RTL":{"role":"article","title":"RTL","abstract":[{"type":"text","text":"KeyboardKit supports RTL (right-to-left) locales, which means that it supports locales like "},{"type":"reference","isActive":true,"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardLocale\/arabic"},{"type":"text","text":",  "},{"type":"reference","isActive":true,"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardLocale\/persian"},{"type":"text","text":" etc."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/RTL","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/rtl"},"doc://KeyboardKit/documentation/KeyboardKit/Routing":{"role":"article","title":"Routing","abstract":[{"type":"text","text":"This article describes how KeyboardKit adds ways for you to route text from the main app to other text fields within the keyboard."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Routing","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/routing"},"doc://KeyboardKit/documentation/KeyboardKit":{"role":"collection","title":"KeyboardKit","abstract":[{"type":"text","text":"KeyboardKit helps you build custom keyboards with Swift and SwiftUI."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit","kind":"symbol","type":"topic","url":"\/documentation\/keyboardkit"},"doc://KeyboardKit/documentation/KeyboardKit/Localization":{"role":"article","title":"Localization","abstract":[{"type":"text","text":"This article describes the KeyboardKit localization model and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Localization","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/localization"},"doc://KeyboardKit/documentation/KeyboardKit/Actions":{"role":"article","title":"Actions","abstract":[{"type":"text","text":"This article describes the KeyboardKit action engine and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Actions","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/actions"},"doc://KeyboardKit/documentation/KeyboardKit/External-Keyboards":{"role":"article","title":"External Keyboards","abstract":[{"type":"text","text":"This article describes the KeyboardKit external keyboard engine and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/External-Keyboards","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/external-keyboards"},"doc://KeyboardKit/documentation/KeyboardKit/Keyboard":{"role":"article","title":"Keyboard","abstract":[{"type":"text","text":"This article describes the KeyboardKit keyboard types and how to use them."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Keyboard","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/keyboard"},"doc://KeyboardKit/documentation/KeyboardKit/Dictation":{"role":"article","title":"Dictation (PREVIEW)","abstract":[{"type":"text","text":"This article describes the KeyboardKit dictation engine and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Dictation","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/dictation"},"doc://KeyboardKit/documentation/KeyboardKit/Layout":{"role":"article","title":"Layouts","abstract":[{"type":"text","text":"This article describes the KeyboardKit keyboard layout engine and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Layout","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/layout"},"doc://KeyboardKit/documentation/KeyboardKit/Input":{"role":"article","title":"Input","abstract":[{"type":"text","text":"This article describes the KeyboardKit input set engine and how to use it."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Input","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/input"},"https://github.com/KeyboardKit/KeyboardKitPro":{"title":"KeyboardKit Pro","titleInlineContent":[{"type":"text","text":"KeyboardKit Pro"}],"type":"link","identifier":"https:\/\/github.com\/KeyboardKit\/KeyboardKitPro","url":"https:\/\/github.com\/KeyboardKit\/KeyboardKitPro"},"doc://KeyboardKit/documentation/KeyboardKit/KeyboardLocale/arabic":{"role":"symbol","title":"KeyboardLocale.arabic","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"arabic"}],"abstract":[],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardLocale\/arabic","kind":"symbol","type":"topic","url":"\/documentation\/keyboardkit\/keyboardlocale\/arabic"},"doc://KeyboardKit/documentation/KeyboardKit/Feedback":{"role":"article","title":"Feedback","abstract":[{"type":"text","text":"This article describes the KeyboardKit feedback engine and how to use it to trigger audio and haptic feedback."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Feedback","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/feedback"},"doc://KeyboardKit/documentation/KeyboardKit/Settings":{"role":"article","title":"Settings","abstract":[{"type":"text","text":"This article describes the KeyboardKit settings utilities and how to use them."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Settings","kind":"article","type":"topic","url":"\/documentation\/keyboardkit\/settings"}}}